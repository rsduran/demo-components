[
  {
    "topic": 17,
    "index": 1,
    "url": "https://www.examtopics.com/discussions/microsoft/view/37097-exam-az-204-topic-17-question-1-discussion/",
    "body": "You need to investigate the Azure Function app error message in the development environment.<br>What should you do?<br>",
    "options": [
      "<span class=\"multi-choice-letter\" data-choice-letter=\"A\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tA.\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tConnect Live Metrics Stream from Application Insights to the Azure Function app and filter the metrics.\n\t\t\t\t\t\t\t\t\t\t<span class=\"badge badge-success most-voted-answer-badge\" title=\"\" style=\"display: none;\" data-original-title=\"This answer is currently the most voted for in the discussion\">\n                Most Voted\n            </span>",
      "<span class=\"multi-choice-letter\" data-choice-letter=\"B\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tB.\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tCreate a new Azure Log Analytics workspace and instrument the Azure Function app with Application Insights.",
      "<span class=\"multi-choice-letter\" data-choice-letter=\"C\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tC.\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tUpdate the Azure Function app with extension methods from Microsoft.Extensions.Logging to log events by using the log instance.",
      "<span class=\"multi-choice-letter\" data-choice-letter=\"D\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tD.\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tAdd a new diagnostic setting to the Azure Function app to send logs to Log Analytics."
    ],
    "answer": "A",
    "answerDescription": "Azure Functions offers built-in integration with Azure Application Insights to monitor functions.<br>The following areas of Application Insights can be helpful when evaluating the behavior, performance, and errors in your functions:<br>Live Metrics: View metrics data as it's created in near real-time.<br><br>Failures -<br><br>Performance -<br><br>Metrics -<br>Reference:<br>https://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring",
    "votes": [
      {
        "answer": "A",
        "count": 2,
        "isMostVoted": true
      }
    ],
    "comments": [
      {
        "date": "2021-01-11T20:49:00.000Z",
        "voteCount": 32,
        "content": "Given answer is correct.\nLive Metrics Stream: \nwhen your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. Open below link for this statement.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring"
      },
      {
        "date": "2021-10-13T14:45:00.000Z",
        "voteCount": 3,
        "content": "not a good option :- \"If you enable Applications Insights during development, you might hit this limit during testing. Azure provides portal and email notifications when you're approaching your daily limit. If you miss those alerts and hit the limit, new logs won't appear in Application Insights queries. Be aware of the limit to avoid unnecessary troubleshooting time\n\""
      },
      {
        "date": "2020-11-18T12:45:00.000Z",
        "voteCount": 14,
        "content": "Live Metrics Stream: when your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. Use this method when monitoring functions running on multiple-instances or on Linux in a Consumption plan. This method uses sampled data.. Answer is A\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring"
      },
      {
        "date": "2024-06-27T00:10:00.000Z",
        "voteCount": 1,
        "content": "Going with A as much because I suspect this is what MS would want as an answer."
      },
      {
        "date": "2023-04-15T00:35:00.000Z",
        "voteCount": 1,
        "content": "I believe D is might be an option now also\nhttps://learn.microsoft.com/en-us/azure/azure-functions/functions-monitor-log-analytics?tabs=csharp"
      },
      {
        "date": "2022-11-17T10:21:00.000Z",
        "voteCount": 1,
        "content": "Connect Live Metrics Stream from Application Insights to the Azure Function app and filter the metrics."
      },
      {
        "date": "2022-10-01T07:44:00.000Z",
        "voteCount": 2,
        "content": "If it is a timeout I might not go check the metrics but of course it depends on what I expect. I might want to see the application logs. But I wonder how can one question be so confusing and totally dependent on the person checking the issue and his knowledge on the application. It totally depends, Microsoft"
      },
      {
        "date": "2022-10-08T08:59:00.000Z",
        "voteCount": 2,
        "content": "It has to be about Metrics because that is mentioned as one of the first steps in one of the obscure microsoft pages"
      },
      {
        "date": "2021-08-23T05:00:00.000Z",
        "voteCount": 4,
        "content": "Should not B happen before A happen?  I would think correct answer is B then A ...\n\nIf there is no log analytics, nor application insights connected, how can live stream happens?"
      },
      {
        "date": "2021-11-12T01:02:00.000Z",
        "voteCount": 1,
        "content": "Current environment:\n\u201cThe solution uses Application Insights, Azure Monitor, and Azure Key Vault.\u201d\n\nA is correct"
      },
      {
        "date": "2021-04-04T06:51:00.000Z",
        "voteCount": 3,
        "content": "I thought: Why not B? But then realised it is in a development environment and those generally don't log to AppInsights. So A is indeed correct."
      },
      {
        "date": "2021-08-23T05:21:00.000Z",
        "voteCount": 1,
        "content": "\"when your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. \" If there are no application insights, there cannot be any Live Steaming for A"
      },
      {
        "date": "2021-09-17T07:03:00.000Z",
        "voteCount": 3,
        "content": "Why do they not log to AppInsights in a development environment? https://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring"
      },
      {
        "date": "2021-03-27T02:36:00.000Z",
        "voteCount": 6,
        "content": "The question specifically says \"in a development environment\". Live Metrics Stream is recommended for production applications. I would go for D.\nhttps://docs.microsoft.com/en-us/azure/azure-monitor/app/live-stream"
      },
      {
        "date": "2021-01-10T16:29:00.000Z",
        "voteCount": 5,
        "content": "shouldn't be D as mentioned in Issues section it's 400 error\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-diagnostics"
      },
      {
        "date": "2021-01-10T05:53:00.000Z",
        "voteCount": 12,
        "content": "I think the answer should be (D) - Add new diagnostics settings.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitor-log-analytics?tabs=csharp\n\"From the Monitoring section of your function app in the Azure portal, select Diagnostic settings, and then select Add diagnostic setting.\"\n\nLive Metrics is used for monitoring a live system and should not be necessary in a development environment, because there are not that many events to use the \"big canon\".\nhttps://docs.microsoft.com/en-us/azure/azure-monitor/app/live-stream"
      },
      {
        "date": "2021-01-11T20:50:00.000Z",
        "voteCount": 4,
        "content": "Streaming Logs\nWhile developing an application, you often want to see what's being written to the logs in near real time when running in Azure.\n\nThere are two ways to view a stream of the log data being generated by your function executions.\n\nBuilt-in log streaming: the App Service platform lets you view a stream of your application log files. This stream is equivalent to the output seen when you debug your functions during local development and when you use the Test tab in the portal. All log-based information is displayed. For more information, see Stream logs. This streaming method supports only a single instance, and can't be used with an app running on Linux in a Consumption plan.\n\nLive Metrics Stream: when your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. Use this method when monitoring functions running on multiple-instances or on Linux in a Consumption plan. This method uses sampled data.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring"
      },
      {
        "date": "2020-11-16T05:34:00.000Z",
        "voteCount": 5,
        "content": "I do not understand the explanation: CONNECT Live Metrics Stream from Application Insights TO THE AZURE FUNCTION app and filter the metrics... Functions have InSights integrated by default. I presume, I should check collected data somehow. But not connect anything... ?"
      }
    ],
    "examNameCode": "az-204",
    "topicNumber": "17"
  },
  {
    "topic": 17,
    "index": 2,
    "url": "https://www.examtopics.com/discussions/microsoft/view/46762-exam-az-204-topic-17-question-2-discussion/",
    "body": "HOTSPOT -<br>You need to configure security and compliance for the corporate website files.<br>Which Azure Blob storage settings should you use? To answer, select the appropriate options in the answer area.<br>NOTE: Each correct selection is worth one point.<br>Hot Area:<br><img src=\"/assets/media/exam-media/04273/0042900001.png\" class=\"in-exam-image\"><br>",
    "options": [],
    "answer": "<img src=\"/assets/media/exam-media/04273/0043000001.png\" class=\"in-exam-image\">",
    "answerDescription": "Box 1: role-based access control (RBAC)<br>Azure Storage supports authentication and authorization with Azure AD for the Blob and Queue services via Azure role-based access control (Azure RBAC).<br>Scenario: File access must restrict access by IP, protocol, and Azure AD rights.<br><br>Box 2: storage account type -<br>Scenario: The website uses files stored in Azure Storage<br>Auditing of the file updates and transfers must be enabled to comply with General Data Protection Regulation (GDPR).<br>Creating a diagnostic setting:<br>1. Sign in to the Azure portal.<br>2. Navigate to your storage account.<br>3. In the Monitoring section, click Diagnostic settings (preview).<br><img src=\"/assets/media/exam-media/04273/0043100001.jpg\" class=\"in-exam-image\"><br>4. Choose file as the type of storage that you want to enable logs for.<br>5. Click Add diagnostic setting.<br>Reference:<br>https://docs.microsoft.com/en-us/azure/storage/common/storage-introduction https://docs.microsoft.com/en-us/azure/storage/files/storage-files-monitoring",
    "votes": [],
    "comments": [
      {
        "date": "2021-04-16T08:18:00.000Z",
        "voteCount": 102,
        "content": "shared access signature (SAS) token\nchange feed"
      },
      {
        "date": "2023-04-17T03:06:00.000Z",
        "voteCount": 7,
        "content": "received 2023-04-17 went with above, score 926"
      },
      {
        "date": "2021-06-01T08:50:00.000Z",
        "voteCount": 61,
        "content": "Box 1: shared access signature (SAS) token\nAccording to the diagram, blob storage is accessed from Azure CDN. Azure CDN doesn't support authentication with managed identity. If you want to grant limited access to private storage containers, you can use the Shared Access Signature (SAS) feature of your Azure storage account. Also, using a managed identity you can't restrict access by IP as requested.\n\nBox 2: change feed\nThe purpose of the change feed is to provide transaction logs of all the changes that occur to the blobs and the blob metadata in your storage account.\nThe file updates must be read-only, stored in the order in which they occurred, include only create, update, delete, and copy operations, and be retained for compliance reasons.\n\nReference:\nhttps://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support\nhttps://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal"
      },
      {
        "date": "2024-06-27T00:29:00.000Z",
        "voteCount": 1,
        "content": "Answer : C) SAS, B) change feed.\nGoing to go with SAS. \nThere still does not seem to be access to blob storage even in Premium with managed identity.\nAt least I cannot find it."
      },
      {
        "date": "2021-11-09T11:52:00.000Z",
        "voteCount": 9,
        "content": "Professor is back :)))"
      },
      {
        "date": "2022-01-22T22:30:00.000Z",
        "voteCount": 1,
        "content": "File access must restrict access by IP, protocol, and Azure AD rights.\n\n\nAuditing of the file updates and transfers must be enabled to comply with General Data Protection Regulation (GDPR). The file updates must be read-only, stored in the order in which they occurred, include only create, update, delete, and copy operations, and be retained for compliance reasons."
      },
      {
        "date": "2024-08-11T23:05:00.000Z",
        "voteCount": 1,
        "content": "Got this case City Power and Lights on my exam 9th Aug 2024. Went with highly voted answer, Scored:871\n- shared access signature (SAS) token\n- change feed"
      },
      {
        "date": "2023-07-09T08:27:00.000Z",
        "voteCount": 2,
        "content": "An example of Access storage blobs using an Azure CDN custom domain \nIt's using SAS. \nhttps://learn.microsoft.com/en-us/azure/cdn/cdn-storage-custom-domain-https"
      },
      {
        "date": "2023-05-27T00:46:00.000Z",
        "voteCount": 1,
        "content": "Appeared the exam I toke at 27-5-2023\nI chose SAS and change feed \n\nhttps://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support\nhttps://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal"
      },
      {
        "date": "2023-05-12T11:48:00.000Z",
        "voteCount": 2,
        "content": "Got this 2023-05-12.\nMake sure to prepare VanArsdel Inc Canada study case"
      },
      {
        "date": "2022-12-16T15:35:00.000Z",
        "voteCount": 6,
        "content": "Got this on Dec 16th, 2022. Scored 921 and answered SAS token and change feed."
      },
      {
        "date": "2022-11-17T10:23:00.000Z",
        "voteCount": 3,
        "content": "SAS\nchange feed"
      },
      {
        "date": "2022-10-22T07:26:00.000Z",
        "voteCount": 2,
        "content": "RBAC and change feed.\nwhy RBAC? Triggering keywords for me are \"Azure AD\" and \"restrict File Access\". It seems that some kind of authorization is set for groups."
      },
      {
        "date": "2022-06-25T07:19:00.000Z",
        "voteCount": 3,
        "content": "SAS token\nchange feed"
      },
      {
        "date": "2022-03-08T03:28:00.000Z",
        "voteCount": 1,
        "content": "shared access signature (SAS) token\nchange feed"
      },
      {
        "date": "2022-02-24T13:12:00.000Z",
        "voteCount": 2,
        "content": "Answer: SAS/Change Feed\n\nFrom problem description:\n\"Security -\nFile access must restrict access by IP, protocol, and Azure AD rights.\"\n\nThe keyword here is IP. \n\nFrom https://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support\n\"With a SAS, you can define various parameters of access to a blob, such as start and expiry times, permissions (read/write), and IP ranges. \"\n\nSAS is from AD so you get the AD rights.\n\nFor Change Feed see: https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal"
      },
      {
        "date": "2022-01-28T23:00:00.000Z",
        "voteCount": 2,
        "content": "Agree on RBAC.\nChange feed\n\nThe change feed provides ordered, guaranteed, durable, immutable, read-only log of these changes. https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal"
      },
      {
        "date": "2021-08-10T11:32:00.000Z",
        "voteCount": 7,
        "content": "RBAC\nchange feed"
      },
      {
        "date": "2021-08-24T09:31:00.000Z",
        "voteCount": 1,
        "content": "Correct, file access is AD User based rights.  IP and Protocol, can be configured separately"
      },
      {
        "date": "2021-03-12T12:58:00.000Z",
        "voteCount": 4,
        "content": "managed identity\nchange feed"
      },
      {
        "date": "2021-03-14T08:34:00.000Z",
        "voteCount": 10,
        "content": "According to the diagram, blob storage is accessed from Azure CDN. Azure CDN doesn't support authentication with managed identity. I think the correct answer is Shared Access Token. https://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support"
      },
      {
        "date": "2021-03-19T02:37:00.000Z",
        "voteCount": 1,
        "content": "Thanks, I think you are right."
      },
      {
        "date": "2021-07-15T12:49:00.000Z",
        "voteCount": 2,
        "content": "See the arrow -- Flow is from Storage to CDN.\nDiagram does not show, how Storage is populated.\nNo one will populate storage via CDN"
      },
      {
        "date": "2021-03-24T00:36:00.000Z",
        "voteCount": 16,
        "content": "Exactly, and using a managed identity you can't restrict access by IP as requested. User delegation SAS is the right choice in this case (you need AAD integration) and change feed is the service designed for file audits.\nhttps://docs.microsoft.com/en-us/rest/api/storageservices/create-user-delegation-sas\nhttps://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal"
      },
      {
        "date": "2021-04-08T02:20:00.000Z",
        "voteCount": 1,
        "content": "But RBAC is supported on file shares too. It needs Azure AD Domain Services, I think."
      }
    ],
    "examNameCode": "az-204",
    "topicNumber": "17"
  }
]